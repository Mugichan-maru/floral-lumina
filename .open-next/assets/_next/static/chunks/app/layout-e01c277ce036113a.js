(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1493:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,3673,23)),Promise.resolve().then(s.t.bind(s,8497,23)),Promise.resolve().then(s.t.bind(s,9807,23)),Promise.resolve().then(s.bind(s,5006)),Promise.resolve().then(s.bind(s,7740))},3011:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return r}});let l=s(2115);function r(e,t){let s=(0,l.useRef)(null),r=(0,l.useRef)(null);return(0,l.useCallback)(l=>{if(null===l){let e=s.current;e&&(s.current=null,e());let t=r.current;t&&(r.current=null,t())}else e&&(s.current=n(e,l)),t&&(r.current=n(t,l))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let s=e(t);return"function"==typeof s?s:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3673:()=>{},5006:(e,t,s)=>{"use strict";s.d(t,{default:()=>x});var l=s(5155),r=s(2115),n=s(1408),a=s(1130),i=s(63),o=s(7740),c=s(5239);function d(e){let{item:t}=e,{removeItem:s,updateQuantity:r}=(0,o._)(),n=(e=>{let t=e.match(/[\d,]+/);return t?parseInt(t[0].replace(/,/g,""),10):0})(t.product.price),i=n*t.quantity,d=e=>{e<=0?s(t.id):r(t.id,e)};return(0,l.jsxs)(a.P.div,{className:"flex gap-4 p-4 border-b border-gray-200 last:border-b-0",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:[(0,l.jsx)("div",{className:"w-16 h-20 flex-shrink-0 relative",children:(0,l.jsx)(c.default,{src:t.product.images[0],alt:t.product.title,fill:!0,className:"object-cover rounded-lg"})}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("h3",{className:"text-sm font-display text-gray-dark truncate mb-1",children:t.product.title}),t.selectedColor&&(0,l.jsxs)("p",{className:"text-xs text-gray-500 font-body mb-2",children:["カラー: ",t.selectedColor]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"text-sm text-brand-gold font-display font-semibold",children:n>0?"\xa5".concat(i.toLocaleString()):t.product.price}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(a.P.button,{onClick:()=>d(t.quantity-1),className:"w-6 h-6 rounded-full border border-gray-300 flex items-center justify-center hover:border-brand-gold transition-colors",whileTap:{scale:.9},children:(0,l.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),(0,l.jsx)("span",{className:"text-sm font-body min-w-[20px] text-center",children:t.quantity}),(0,l.jsx)(a.P.button,{onClick:()=>d(t.quantity+1),className:"w-6 h-6 rounded-full border border-gray-300 flex items-center justify-center hover:border-brand-gold transition-colors",whileTap:{scale:.9},children:(0,l.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]})]}),n>0&&t.quantity>1&&(0,l.jsxs)("p",{className:"text-xs text-gray-400 font-body mt-1",children:["単価: \xa5",n.toLocaleString()]})]}),(0,l.jsx)(a.P.button,{onClick:()=>s(t.id),className:"w-6 h-6 text-gray-400 hover:text-red-500 transition-colors flex-shrink-0",whileTap:{scale:.9},children:(0,l.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}function x(){let{state:e,closeCart:t,clearCart:s}=(0,o._)(),c=(0,i.useRouter)(),[x,u]=r.useState(!1),[h,f]=r.useState(null),m=async()=>{try{if(f(null),0===e.items.length)return void t();u(!0),t(),c.push("/checkout")}catch(e){f((null==e?void 0:e.message)||"チェックアウトでエラーが発生しました")}finally{u(!1)}};return(0,l.jsx)(n.N,{children:e.isOpen&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.P.div,{className:"fixed inset-0 bg-black/50 z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e=>{e.target===e.currentTarget&&t()}}),(0,l.jsxs)(a.P.div,{className:"fixed top-0 right-0 h-full w-full max-w-md bg-white shadow-xl z-50 flex flex-col",initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,l.jsx)("h2",{className:"text-lg font-display text-gray-800",children:"ショッピングカート"}),(0,l.jsx)(a.P.button,{onClick:t,className:"w-8 h-8 rounded-full hover:bg-gray-100 flex items-center justify-center transition-colors",whileTap:{scale:.9},children:(0,l.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,l.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===e.items.length?(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[(0,l.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:(0,l.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})})}),(0,l.jsx)("h3",{className:"text-lg font-display text-gray-800 mb-2",children:"カートは空です"}),(0,l.jsxs)("p",{className:"text-sm text-gray-500 font-body mb-6",children:["お気に入りの商品を見つけて",(0,l.jsx)("br",{}),"カートに追加してください"]}),(0,l.jsx)(a.P.button,{onClick:t,className:"bg-brand-gold text-white px-6 py-3 rounded-full font-display text-sm tracking-wide hover:bg-opacity-90 transition-colors",whileHover:{y:-2},whileTap:{scale:.98},children:"商品を見る"})]}):(0,l.jsxs)("div",{children:[e.items.length>0&&(0,l.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,l.jsx)(a.P.button,{onClick:s,className:"text-xs text-gray-500 hover:text-red-500 transition-colors font-body",whileTap:{scale:.95},children:"カートを空にする"})}),(0,l.jsx)(n.N,{children:e.items.map(e=>(0,l.jsx)(d,{item:e},e.id))})]})}),e.items.length>0&&(0,l.jsxs)("div",{className:"border-t border-gray-200 p-4 space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("span",{className:"text-lg font-display text-gray-800",children:["合計：",e.totalItems,"点"]}),(0,l.jsxs)("span",{className:"text-lg font-display font-semibold text-brand-gold",children:["\xa5",e.totalPrice.toLocaleString()]})]}),(0,l.jsx)("p",{className:"text-xs text-gray-500 font-body",children:"※配送料は含まれていません"}),(0,l.jsx)(a.P.button,{className:"w-full bg-brand-gold text-white py-4 rounded-full font-display text-lg tracking-wide shadow-md disabled:opacity-60",whileHover:{y:x?0:-2},whileTap:{scale:x?1:.98},disabled:x,onClick:m,children:x?"処理中...":"ご注文手続きへ"}),h&&(0,l.jsx)("p",{className:"text-sm text-red-500 font-body text-center",children:h}),(0,l.jsx)(a.P.button,{onClick:t,className:"w-full border border-brand-gold text-brand-gold py-3 rounded-full font-display text-sm tracking-wide hover:bg-brand-gold hover:text-white transition-colors",whileTap:{scale:.98},children:"続けて買い物をする"})]})]})]})})}},8497:e=>{e.exports={style:{fontFamily:"'Marcellus', 'Marcellus Fallback'",fontWeight:400,fontStyle:"normal"},className:"__className_0ccb75",variable:"__variable_0ccb75"}},9807:e=>{e.exports={style:{fontFamily:"'Noto Sans JP', 'Noto Sans JP Fallback'",fontStyle:"normal"},className:"__className_a70e0e",variable:"__variable_a70e0e"}}},e=>{e.O(0,[18,669,356,339,503,441,255,358],()=>e(e.s=1493)),_N_E=e.O()}]);