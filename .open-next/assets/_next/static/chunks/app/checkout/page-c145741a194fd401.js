(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[279],{3245:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s={nemophila:{id:"nemophila",title:"ネモフィラ",price:"\xa53,200~",images:["/icons/product1.jpeg","/icons/about1.jpeg","/icons/about2.jpeg"],description:"春の訪れを告げる美しいネモフィラをモチーフにしたスマホケースです。透明感のある花びらが手元を上品に彩ります。テキストテキストテキストテキストテキストテキストテキストテキストテキストテキストテキスト",features:["高品質TPU素材使用","各種スマートフォンに対応","耐衝撃性に優れた設計","ワイヤレス充電対応","手作業による丁寧な仕上げ"],colors:[{name:"クリア",value:"#FFFFFF"},{name:"ライトブルー",value:"#E6F3FF"},{name:"ピンク",value:"#FFE6F0"}],inStock:!0,category:"スマホケース"},margaret:{id:"margaret",title:"マーガレット",price:"\xa53,200～",images:["/icons/product2.jpeg","/icons/about1.jpeg","/icons/about2.jpeg"],description:"純白で可憐なマーガレットをデザインしたエレガントなスマホケースです。花言葉は「恋占い」「真実の愛」。愛らしい花びらが日常に特別感を添えます。",features:["高品質TPU素材使用","各種スマートフォンに対応","耐衝撃性に優れた設計","ワイヤレス充電対応","手作業による丁寧な仕上げ"],colors:[{name:"クリア",value:"#FFFFFF"},{name:"ソフトピンク",value:"#FFE6E6"},{name:"ミントグリーン",value:"#E6FFF0"}],inStock:!0,category:"スマホケース"},hydrangea:{id:"hydrangea",title:"紫陽花",price:"ON DISPLAY",images:["/icons/product3.jpeg","/icons/about1.jpeg","/icons/about2.jpeg"],description:"梅雨の季節を美しく彩る紫陽花をモチーフにした特別なスマホケースです。グラデーションが美しい花びらが、雨の日も心を晴やかにしてくれます。",features:["高品質TPU素材使用","各種スマートフォンに対応","耐衝撃性に優れた設計","ワイヤレス充電対応","手作業による丁寧な仕上げ"],colors:[{name:"ブルーグラデーション",value:"#E6F0FF"},{name:"パープルグラデーション",value:"#F0E6FF"},{name:"ピンクグラデーション",value:"#FFE6F0"}],inStock:!1,category:"スマホケース"},suzuran:{id:"suzuran",title:"すずらん",price:"ON DISPLAY",images:["/icons/product4.jpeg","/icons/about1.jpeg","/icons/about2.jpeg"],description:"可憐で清楚なすずらんをデザインした上品なスマホケースです。花言葉は「再び幸せが訪れる」。小さな鈴のような花が幸運を運んでくれそうです。",features:["高品質TPU素材使用","各種スマートフォンに対応","耐衝撃性に優れた設計","ワイヤレス充電対応","手作業による丁寧な仕上げ"],colors:[{name:"クリア",value:"#FFFFFF"},{name:"ソフトグリーン",value:"#E6FFE6"}],inStock:!1,category:"スマホケース"},sunflower:{id:"sunflower",title:"向日葵",price:"\xa53,500～",images:["/icons/product5.jpeg","/icons/about1.jpeg","/icons/about2.jpeg"],description:"太陽に向かって咲く力強い向日葵をモチーフにした元気いっぱいのスマホケースです。明るい黄色が持つ人の気持ちも晴れやかにしてくれます。",features:["高品質TPU素材使用","各種スマートフォンに対応","耐衝撃性に優れた設計","ワイヤレス充電対応","手作業による丁寧な仕上げ"],colors:[{name:"イエロー",value:"#FFF3E6"},{name:"オレンジ",value:"#FFE6CC"},{name:"クリア",value:"#FFFFFF"}],inStock:!0,category:"スマホケース"},caseOption:{id:"caseOption",title:"ショルダーストラップ対応ケース",price:"\xa5600",images:["/icons/option01_1.jpeg","/icons/option01_2.jpeg","/icons/option01_3.jpeg","/icons/option01_4.jpeg","/icons/option01_5.jpeg","/icons/option01_6.jpeg","/icons/option01_7.jpeg"],description:"作品と一緒に購入いただくことで、ショルダーストラップ対応ケースに変更して制作します。",features:["背面:PC素材(ハード)","側面:TPU素材(ソフト)"],colors:[{name:"ゴールド",value:"#FFD700"},{name:"シルバー",value:"#C0C0C0"}],inStock:!0,category:"オプション"}}},7212:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var s=a(5155),n=a(2115),i=a(4511),l=a(2890),r=a(2619),o=a.n(r),c=a(3245);let d=(0,i.c)("pk_test_51RwBhYJXnckPQnr6nzyy0JKgVVAPocnzThTQbKBK9mWsYb3ulSghER955qXO9PwsJ6v370jOoLpEuus6D1NPWQUj00s1XPMpBC"),p=e=>{let t=e.match(/[\d,]+/);return t?parseInt(t[0].replace(/,/g,""),10):0};function u(){let e=(0,l.t2)(),t=(0,l.HH)(),[a,i]=(0,n.useState)(""),[r,o]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),[p,u]=(0,n.useState)(!1),m=async s=>{var n;if(s.preventDefault(),d(null),!e||!t)return;u(!0);let i=window.location.origin,l=await e.confirmPayment({elements:t,confirmParams:{return_url:"".concat(i,"/success"),receipt_email:a||void 0,shipping:(null==r||null==(n=r.value)?void 0:n.name)?{name:r.value.name,address:r.value.address,phone:r.value.phone||void 0}:void 0}});l.error&&d(l.error.message||"お支払いでエラーが発生しました"),u(!1)};return(0,s.jsxs)("form",{onSubmit:m,className:"max-w-xl w-full space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("label",{className:"block text-sm font-display text-gray-700",children:"メールアドレス"}),(0,s.jsx)(l.DC,{onChange:e=>i(e.value.email),options:{defaultValues:{email:a}}})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("label",{className:"block text-sm font-display text-gray-700",children:"お届け先住所"}),(0,s.jsx)(l.H1,{options:{mode:"shipping",allowedCountries:["JP"],fields:{phone:"always"}},onChange:e=>o(e)})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("label",{className:"block text-sm font-display text-gray-700",children:"お支払い方法"}),(0,s.jsx)(l.He,{options:{layout:"accordion"}}),(0,s.jsx)("p",{className:"text-xs text-gray-500 font-body",children:"Apple Pay / Google Pay は、ブラウザと環境が対応している場合に表示されます。"})]}),c&&(0,s.jsx)("p",{className:"text-sm text-red-500 font-body",children:c}),(0,s.jsx)("button",{type:"submit",disabled:!e||p,className:"w-full bg-brand-gold text-white py-3 rounded-full font-display text-lg disabled:opacity-60",children:p?"処理中...":"支払いを確定する"})]})}function m(){let[e,t]=(0,n.useState)(null),[a,i]=(0,n.useState)(null),[r,m]=(0,n.useState)([]);(0,n.useEffect)(()=>{(async()=>{try{let e=sessionStorage.getItem("floral-lumina-cart"),a=e?JSON.parse(e):[];if(!Array.isArray(a)||0===a.length)return void i("カートが空です");let s=a.map(e=>{var t;let a=null==(t=e.product)?void 0:t.id,s=a?c.Z[a]:void 0;return a&&s?{id:a,title:s.title,price:s.price,quantity:e.quantity}:null}).filter(Boolean);m(s);let n=s.map(e=>({id:e.id,quantity:e.quantity})),l=await fetch("/api/payments/create-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:n})}),r=await l.json();if(!l.ok)throw Error((null==r?void 0:r.error)||"Failed to create intent");t(r.clientSecret)}catch(e){i((null==e?void 0:e.message)||"初期化に失敗しました")}})()},[]);let x=(0,n.useMemo)(()=>e?{clientSecret:e,appearance:{theme:"flat"},locale:"ja"}:void 0,[e]),y=(0,n.useMemo)(()=>r.reduce((e,t)=>e+p(t.price)*t.quantity,0),[r]);return(0,s.jsxs)("main",{className:"min-h-[70vh] flex flex-col items-center px-6 py-10",children:[(0,s.jsx)("h1",{className:"text-2xl font-display text-gray-dark mb-6",children:"お支払い"}),a&&(0,s.jsx)("div",{className:"w-full max-w-xl mb-6 rounded-md border border-red-200 bg-red-50 px-4 py-3",children:(0,s.jsx)("p",{className:"text-sm text-red-600 font-body",children:a})}),r.length>0&&(0,s.jsxs)("div",{className:"w-full max-w-xl mb-8 rounded-lg border border-gray-200",children:[(0,s.jsxs)("div",{className:"px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-base font-display text-gray-800",children:"ご注文内容"}),(0,s.jsx)(o(),{href:"/products",className:"text-sm text-brand-gold hover:underline font-body",children:"変更する"})]}),(0,s.jsx)("ul",{className:"divide-y divide-gray-100",children:r.map(e=>(0,s.jsxs)("li",{className:"px-4 py-3 flex items-center justify-between text-sm",children:[(0,s.jsxs)("div",{className:"text-gray-700 font-body",children:[(0,s.jsx)("p",{className:"font-display",children:e.title}),(0,s.jsxs)("p",{className:"text-gray-500",children:["数量: ",e.quantity]})]}),(0,s.jsxs)("div",{className:"text-gray-800 font-display",children:["\xa5",(p(e.price)*e.quantity).toLocaleString()]})]},e.id))}),(0,s.jsxs)("div",{className:"px-4 py-3 border-t border-gray-200 flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600 font-body",children:"小計"}),(0,s.jsxs)("span",{className:"text-lg font-display text-brand-gold",children:["\xa5",y.toLocaleString()]})]})]}),!e&&!a&&(0,s.jsx)("p",{className:"text-gray-600 font-body",children:"初期化中..."}),e&&x&&(0,s.jsxs)("div",{className:"w-full max-w-xl",children:[(0,s.jsx)(l.S8,{stripe:d,options:x,children:(0,s.jsx)(u,{})},e),"pk_test_51RwBhYJXnckPQnr6nzyy0JKgVVAPocnzThTQbKBK9mWsYb3ulSghER955qXO9PwsJ6v370jOoLpEuus6D1NPWQUj00s1XPMpBC".startsWith("pk_test_")&&(0,s.jsx)("p",{className:"mt-4 text-xs text-gray-500 font-body",children:"テストカード例: 4242 4242 4242 4242 / 任意の有効期限 / 任意の CVC"}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsx)(o(),{href:"/products",className:"text-sm text-gray-500 hover:text-gray-700 font-body underline",children:"カートに戻る"})})]})]})}},9508:(e,t,a)=>{Promise.resolve().then(a.bind(a,7212))}},e=>{e.O(0,[619,200,441,255,358],()=>e(e.s=9508)),_N_E=e.O()}]);