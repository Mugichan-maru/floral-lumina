(()=>{var e={};e.id=146,e.ids=[146],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4684:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>g,routeModule:()=>l,serverHooks:()=>F,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>m});var a={};r.r(a),r.d(a,{POST:()=>p});var s=r(6559),n=r(8088),o=r(7719),i=r(2190),u=r(9990);let c=e=>{let t=e?.match(/[\d,]+/);if(!t)return null;let r=parseInt(t[0].replace(/,/g,""),10);return Number.isFinite(r)?r:null};async function p(e){try{let t=process.env.STRIPE_SECRET_KEY;if(!t)return i.NextResponse.json({error:"Missing STRIPE_SECRET_KEY on server"},{status:500});let r=await e.json().catch(()=>({})),a=r?.items||[];if(!Array.isArray(a)||0===a.length)return i.NextResponse.json({error:"No items provided"},{status:400});let s=[];for(let e of a){let t=u.Z[e.id];if(!t)continue;let r=c(t.price);r&&!(r<=0)&&s.push({price_data:{currency:"jpy",product_data:{name:t.title},unit_amount:r},quantity:Math.max(1,Number(e.quantity)||1)})}if(0===s.length)return i.NextResponse.json({error:"No purchasable items in cart"},{status:400});let n=e.headers.get("origin")||"http://localhost:3000",o=`${n}/success?session_id={CHECKOUT_SESSION_ID}`,p=`${n}/cancel`,l=new URLSearchParams;l.set("mode","payment"),l.set("success_url",o),l.set("cancel_url",p),s.forEach((e,t)=>{l.set(`line_items[${t}][quantity]`,String(e.quantity)),l.set(`line_items[${t}][price_data][currency]`,e.price_data.currency),l.set(`line_items[${t}][price_data][unit_amount]`,String(e.price_data.unit_amount)),l.set(`line_items[${t}][price_data][product_data][name]`,e.price_data.product_data.name)});let d=await fetch("https://api.stripe.com/v1/checkout/sessions",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/x-www-form-urlencoded"},body:l.toString()});if(!d.ok){let e=await d.text().catch(()=>"");return i.NextResponse.json({error:"Stripe error",details:e},{status:500})}let m=await d.json();return i.NextResponse.json({url:m.url})}catch(e){return i.NextResponse.json({error:"Unexpected error",details:String(e)},{status:500})}}let l=new s.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/checkout/route",pathname:"/api/checkout",filename:"route",bundlePath:"app/api/checkout/route"},resolvedPagePath:"C:\\Users\\r0157\\Desktop\\work\\floral-lumina\\src\\app\\api\\checkout\\route.ts",nextConfigOutput:"standalone",userland:a}),{workAsyncStorage:d,workUnitAsyncStorage:m,serverHooks:F}=l;function g(){return(0,o.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:m})}},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6487:()=>{},8335:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9990:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a={nemophila:{id:"nemophila",title:"ネモフィラ",price:"\xa53,200",images:["/icons/product1.jpeg","/icons/about1.jpeg","/icons/about2.jpeg"],description:"春の訪れを告げる美しいネモフィラをモチーフにしたスマホケースです。透明感のある花びらが手元を上品に彩ります。テキストテキストテキストテキストテキストテキストテキストテキストテキストテキストテキスト",features:["高品質TPU素材使用","各種スマートフォンに対応","耐衝撃性に優れた設計","ワイヤレス充電対応","手作業による丁寧な仕上げ"],colors:[{name:"クリア",value:"#FFFFFF"},{name:"ライトブルー",value:"#E6F3FF"},{name:"ピンク",value:"#FFE6F0"}],inStock:!0,category:"LINE UP"},margaret:{id:"margaret",title:"マーガレット",price:"\xa53,200",images:["/icons/product2.jpeg","/icons/about1.jpeg","/icons/about2.jpeg"],description:"純白で可憐なマーガレットをデザインしたエレガントなスマホケースです。花言葉は「恋占い」「真実の愛」。愛らしい花びらが日常に特別感を添えます。",features:["高品質TPU素材使用","各種スマートフォンに対応","耐衝撃性に優れた設計","ワイヤレス充電対応","手作業による丁寧な仕上げ"],colors:[{name:"クリア",value:"#FFFFFF"},{name:"ソフトピンク",value:"#FFE6E6"},{name:"ミントグリーン",value:"#E6FFF0"}],inStock:!0,category:"LINE UP"},hydrangea:{id:"hydrangea",title:"紫陽花",price:"ON DISPLAY",images:["/icons/product3.jpeg","/icons/about1.jpeg","/icons/about2.jpeg"],description:"梅雨の季節を美しく彩る紫陽花をモチーフにした特別なスマホケースです。グラデーションが美しい花びらが、雨の日も心を晴やかにしてくれます。",features:["高品質TPU素材使用","各種スマートフォンに対応","耐衝撃性に優れた設計","ワイヤレス充電対応","手作業による丁寧な仕上げ"],colors:[{name:"ブルーグラデーション",value:"#E6F0FF"},{name:"パープルグラデーション",value:"#F0E6FF"},{name:"ピンクグラデーション",value:"#FFE6F0"}],inStock:!1,category:"LINE UP"},suzuran:{id:"suzuran",title:"すずらん",price:"ON DISPLAY",images:["/icons/product4.jpeg","/icons/about1.jpeg","/icons/about2.jpeg"],description:"可憐で清楚なすずらんをデザインした上品なスマホケースです。花言葉は「再び幸せが訪れる」。小さな鈴のような花が幸運を運んでくれそうです。",features:["高品質TPU素材使用","各種スマートフォンに対応","耐衝撃性に優れた設計","ワイヤレス充電対応","手作業による丁寧な仕上げ"],colors:[{name:"クリア",value:"#FFFFFF"},{name:"ソフトグリーン",value:"#E6FFE6"}],inStock:!1,category:"LINE UP"},sunflower:{id:"sunflower",title:"向日葵",price:"\xa53,500",images:["/icons/product5.jpeg","/icons/about1.jpeg","/icons/about2.jpeg"],description:"太陽に向かって咲く力強い向日葵をモチーフにした元気いっぱいのスマホケースです。明るい黄色が持つ人の気持ちも晴れやかにしてくれます。",features:["高品質TPU素材使用","各種スマートフォンに対応","耐衝撃性に優れた設計","ワイヤレス充電対応","手作業による丁寧な仕上げ"],colors:[{name:"イエロー",value:"#FFF3E6"},{name:"オレンジ",value:"#FFE6CC"},{name:"クリア",value:"#FFFFFF"}],inStock:!0,category:"LINE UP"}}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[447,580],()=>r(4684));module.exports=a})();